(()=>{"use strict";var e,t={20:(e,t,n)=>{var a=n(609),l=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,n){var a,c={},s=null,d=null;for(a in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,a)&&!i.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===c[a]&&(c[a]=t[a]);return{$$typeof:l,type:e,key:s,ref:d,props:c,_owner:r.current}}},317:(e,t,n)=>{const a=window.wp.blocks,l=window.wp.i18n,o=window.wp.primitives;var r=n(848);const i=(0,r.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(o.Path,{fillRule:"evenodd",d:"M6.863 13.644L5 13.25h-.5a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5H5L18 6.5h2V16h-2l-3.854-.815.026.008a3.75 3.75 0 01-7.31-1.549zm1.477.313a2.251 2.251 0 004.356.921l-4.356-.921zm-2.84-3.28L18.157 8h.343v6.5h-.343L5.5 11.823v-1.146z",clipRule:"evenodd"})});var c=n(609);const s=window.wp.blockEditor,d=window.wp.components,w=(window.wp.data,window.wp.coreData),_=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"andw/notices-list","version":"0.0.1","title":"お知らせ一覧","category":"widgets","description":"お知らせの一覧を表示するブロックです。","keywords":["notices","news","announcements","お知らせ","ニュース"],"textdomain":"andw-notices","supports":{"html":false,"align":["wide","full"]},"attributes":{"count":{"type":"number","default":5},"order":{"type":"string","default":"desc","enum":["asc","desc"]},"orderby":{"type":"string","default":"display_date","enum":["display_date","date"]},"includeExternal":{"type":"boolean","default":true},"includeInternal":{"type":"boolean","default":true},"showDate":{"type":"boolean","default":true},"showTitle":{"type":"boolean","default":true},"showExcerpt":{"type":"boolean","default":true},"excerptLength":{"type":"number","default":100},"forceLinkOverride":{"type":"string","default":"item","enum":["item","self","external","internal","null"]},"openInNewTab":{"type":"boolean"},"layout":{"type":"string","default":"list","enum":["list","card"]}},"editorScript":"file:./index.js","editorStyle":"file:./editor.css","style":"file:./style.css"}');(0,a.registerBlockType)(_.name,{..._,icon:i,edit:({attributes:e,setAttributes:t})=>{const{count:n,order:a,orderby:o,includeExternal:r,includeInternal:_,showDate:p,showTitle:u,showExcerpt:m,excerptLength:h,forceLinkOverride:b,openInNewTab:g,layout:v}=e,y=(0,s.useBlockProps)(),{records:f,isResolving:E}=(0,w.useEntityRecords)("postType","notices",{per_page:n,status:"publish",_embed:!0,order:a,orderby:"display_date"===o?"meta_value":o,meta_key:"display_date"===o?"andw_notices_display_date":void 0}),x=f&&f.length>0?f:[{id:1,title:{rendered:(0,l.__)("サンプルお知らせ1","andw-notices")},excerpt:{rendered:(0,l.__)("これはサンプルのお知らせです。実際の投稿を作成してください。","andw-notices")},date:(new Date).toISOString(),meta:{andw_notices_display_date:(new Date).toISOString().split("T")[0]}},{id:2,title:{rendered:(0,l.__)("サンプルお知らせ2","andw-notices")},excerpt:{rendered:(0,l.__)("お知らせの内容がここに表示されます。","andw-notices")},date:(new Date).toISOString(),meta:{andw_notices_display_date:(new Date).toISOString().split("T")[0]}}];return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(s.InspectorControls,null,(0,c.createElement)(d.PanelBody,{title:(0,l.__)("表示設定","andw-notices"),initialOpen:!0},(0,c.createElement)(d.RangeControl,{label:(0,l.__)("表示件数","andw-notices"),value:n,onChange:e=>t({count:e}),min:1,max:20}),(0,c.createElement)(d.SelectControl,{label:(0,l.__)("並び順","andw-notices"),value:a,options:[{label:(0,l.__)("降順（新しい順）","andw-notices"),value:"desc"},{label:(0,l.__)("昇順（古い順）","andw-notices"),value:"asc"}],onChange:e=>t({order:e})}),(0,c.createElement)(d.SelectControl,{label:(0,l.__)("並び基準","andw-notices"),value:o,options:[{label:(0,l.__)("表示日","andw-notices"),value:"display_date"},{label:(0,l.__)("公開日","andw-notices"),value:"date"}],onChange:e=>t({orderby:e})}),(0,c.createElement)(d.SelectControl,{label:(0,l.__)("レイアウト","andw-notices"),value:v,options:[{label:(0,l.__)("リスト","andw-notices"),value:"list"},{label:(0,l.__)("カード","andw-notices"),value:"card"}],onChange:e=>t({layout:e})})),(0,c.createElement)(d.PanelBody,{title:(0,l.__)("フィルター設定","andw-notices"),initialOpen:!1},(0,c.createElement)(d.ToggleControl,{label:(0,l.__)("外部リンクを含める","andw-notices"),checked:r,onChange:e=>t({includeExternal:e})}),(0,c.createElement)(d.ToggleControl,{label:(0,l.__)("内部リンクを含める","andw-notices"),checked:_,onChange:e=>t({includeInternal:e})})),(0,c.createElement)(d.PanelBody,{title:(0,l.__)("表示要素","andw-notices"),initialOpen:!1},(0,c.createElement)(d.ToggleControl,{label:(0,l.__)("日付を表示","andw-notices"),checked:p,onChange:e=>t({showDate:e})}),(0,c.createElement)(d.ToggleControl,{label:(0,l.__)("タイトルを表示","andw-notices"),checked:u,onChange:e=>t({showTitle:e})}),(0,c.createElement)(d.ToggleControl,{label:(0,l.__)("抜粋を表示","andw-notices"),checked:m,onChange:e=>t({showExcerpt:e})}),m&&(0,c.createElement)(d.RangeControl,{label:(0,l.__)("抜粋の文字数","andw-notices"),value:h,onChange:e=>t({excerptLength:e}),min:50,max:300,step:10})),(0,c.createElement)(d.PanelBody,{title:(0,l.__)("リンク設定","andw-notices"),initialOpen:!1},(0,c.createElement)(d.SelectControl,{label:(0,l.__)("リンク動作の上書き","andw-notices"),value:b,options:[{label:(0,l.__)("アイテム設定を尊重","andw-notices"),value:"item"},{label:(0,l.__)("すべて自身のページ","andw-notices"),value:"self"},{label:(0,l.__)("すべて外部URL","andw-notices"),value:"external"},{label:(0,l.__)("すべて内部ページ","andw-notices"),value:"internal"},{label:(0,l.__)("リンクなし","andw-notices"),value:"null"}],onChange:e=>t({forceLinkOverride:e})}),(0,c.createElement)(d.ToggleControl,{label:(0,l.__)("新規タブで開く（一括設定）","andw-notices"),checked:g,onChange:e=>t({openInNewTab:e}),help:(0,l.__)("チェックしない場合は各アイテムの設定を使用","andw-notices")}))),(0,c.createElement)("div",{...y},(0,c.createElement)("div",{className:"andw-notices-block-preview"},(0,c.createElement)("h3",{className:"andw-notices-block-title"},(0,l.__)("お知らせ一覧プレビュー","andw-notices")),E&&(0,c.createElement)(d.Placeholder,{icon:i,label:(0,l.__)("お知らせを読み込み中...","andw-notices")},(0,c.createElement)(d.Spinner,null)),!E&&(0,c.createElement)("ul",{className:`andw-notices andw-notices-${v}`},x.slice(0,n).map(e=>{return(0,c.createElement)("li",{key:e.id,className:"andw-notice-item"},p&&(0,c.createElement)("time",{className:"andw-notice-date"},(t=e.meta?.andw_notices_display_date||e.date,new Date(t).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}))),u&&(0,c.createElement)("h4",{className:"andw-notice-title"},e.title.rendered),m&&e.excerpt&&(0,c.createElement)("p",{className:"andw-notice-excerpt"},((e,t)=>{const n=e.replace(/<[^>]+>/g,"");return n.length>t?n.substring(0,t)+"...":n})(e.excerpt.rendered,h)));var t})),!E&&(!f||0===f.length)&&(0,c.createElement)("p",{className:"andw-notices-no-content"},(0,l.__)("お知らせが見つかりませんでした。投稿を作成してください。","andw-notices")))))},save:()=>null})},609:e=>{e.exports=window.React},848:(e,t,n)=>{e.exports=n(20)}},n={};function a(e){var l=n[e];if(void 0!==l)return l.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,n,l,o)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,l,o]=e[d],i=!0,c=0;c<n.length;c++)(!1&o||r>=o)&&Object.keys(a.O).every(e=>a.O[e](n[c]))?n.splice(c--,1):(i=!1,o<r&&(r=o));if(i){e.splice(d--,1);var s=l();void 0!==s&&(t=s)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,l,o]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={77:0,73:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var l,o,[r,i,c]=n,s=0;if(r.some(t=>0!==e[t])){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(c)var d=c(a)}for(t&&t(n);s<r.length;s++)o=r[s],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},n=globalThis.webpackChunkandw_notices=globalThis.webpackChunkandw_notices||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=a.O(void 0,[73],()=>a(317));l=a.O(l)})();